<!DOCTYPE html>
<html lang="en-us">
  <head>    
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes">
    <title>DinoTon</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    
    <script>
      var unityInstance = UnityLoader.instantiate("unityContainer", "Build/DinoTonBuild.json", {onProgress: UnityProgress});
    </script>
    <script>
      var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
      var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
    </script>
    <style>
      .webgl-content {
        position: fixed;
        top: height/2;
        left: width/2;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      .footer {
        display: none;
      }
    </style>
  </head>
  <body>
      <div class="webgl-content">
          <div id="unityContainer"></div>
          <div class="footer">
            <div class="webgl-logo"></div>
            <div class="fullscreen" onclick="unityInstance.SetFullscreen(1)"></div>
            <div class="title">DinoTon</div>
          </div>
      </div>

    <script type="text/javascript">
        // Эта функция должна быть вызвана из Unity после загрузки страницы
        function GetTelegramId() {
            // Проверяем, доступно ли хранилище
            if (typeof(Storage) !== "undefined") {
                // Получаем Telegram ID из Local Storage
                var telegramId = localStorage.getItem('telegramId');
                // Возвращаем ID или 'unknown', если ID не найден
                return telegramId ? telegramId : 'unknown';
            } else {
                // Если Local Storage не поддерживается, возвращаем 'unknown'
                return 'unknown';
            }
        }
    </script>
    
    <script>
      function displayScreenSize()
      {
        var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
          
        console.log("Ширина экрана: " + width + "px");
        console.log("Высота экрана: " + height + "px");
    
        var canvas = document.querySelector("#unityContainer");
    
        var meta = document.createElement('meta');
        meta.name = 'viewport';
        meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
        document.getElementsByTagName('head')[0].appendChild(meta);
        document.querySelector("#unityContainer").className = "unity-mobile";
        canvas.className = "unity-mobile";
        
        canvas.style.width = width + "px";
        canvas.style.height = height + "px";
      }
    
      // Вызов функции при загрузке страницы
      window.onload = displayScreenSize;
    </script>
    
    <script>
      setTimeout(function() {
        $("#unityContainer").find("button").click();
      }, 50);
    </script>

  <script src='https://www.gstatic.com/firebasejs/7.19.0/firebase-app.js'></script>
  <script src='https://www.gstatic.com/firebasejs/7.19.0/firebase-database.js'></script>
 <script>

  // Your web app's Firebase configuration
  var firebaseConfig = {
      apiKey: "AIzaSyBrOsK-fLmNHgxb3bpy7BL-pfk1LyNQ_2g",
      authDomain: "dinotondb.firebaseapp.com",
      databaseURL: "https://dinotondb-default-rtdb.firebaseio.com",
      projectId: "dinotondb",
      storageBucket: "dinotondb.appspot.com",
      messagingSenderId: "237534628642",
      appId: "1:237534628642:web:2e817fb3d1a59e0fe1f37b",
      measurementId: "G-5JLMQ8WQYP"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>
  </body>
</html>
